(function(){"use strict";var e={5509:function(e,t,n){var r=n(5130),i=n(6768);const a=(0,i.Lk)("button",null,"Главная",-1),o=(0,i.Lk)("button",null,"Каталог",-1),s=(0,i.Lk)("button",null,"Меню",-1),l=(0,i.Lk)("button",null,"Авторизация",-1);function u(e,t,n,r,u,c){const d=(0,i.g2)("RouterLink"),h=(0,i.g2)("BreadcrumbsComponent"),p=(0,i.g2)("RouterView");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("nav",null,[(0,i.bF)(d,{to:"/home"},{default:(0,i.k6)((()=>[a])),_:1}),(0,i.bF)(d,{to:"/catalog"},{default:(0,i.k6)((()=>[o])),_:1}),(0,i.bF)(d,{to:"/menu"},{default:(0,i.k6)((()=>[s])),_:1}),e.isAuthenticated?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0,to:"/login"},{default:(0,i.k6)((()=>[l])),_:1})),e.isAuthenticated?((0,i.uX)(),(0,i.Wv)(d,{key:1,to:"/home"},{default:(0,i.k6)((()=>[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>c.logout())},"Выйти")])),_:1})):(0,i.Q3)("",!0)]),(0,i.Lk)("nav",null,[(0,i.bF)(h)]),(0,i.bF)(p)],64)}n(4114);var c=n(4232);const d={class:"breadcrumbs"},h={key:0};function p(e,t,n,r,a,o){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",null,[(0,i.Lk)("ol",d,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.breadcrumbLabels,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t},[(0,i.bF)(s,{to:o.breadcrumbRoutes[t]},{default:(0,i.k6)((()=>[(0,i.eW)((0,c.v_)(e),1)])),_:2},1032,["to"]),t<o.breadcrumbLabels.length-1?((0,i.uX)(),(0,i.CE)("span",h," |")):(0,i.Q3)("",!0)])))),128))])])}var m={data(){return{routeMappings:{separator:" | ",home:"Главная",catalog:"Каталог",menu:"Меню",login:"Авторизация"}}},computed:{breadcrumbPaths(){return this.$route.path.split("/").filter((e=>e))},breadcrumbLabels(){const e=[];return this.breadcrumbPaths.forEach(((t,n)=>{this.routeMappings[t]&&e.push(this.routeMappings[t]),1===n&&this.$route.params.productName&&e.push(this.$route.params.productName)})),e},breadcrumbRoutes(){const e=[];let t="";return this.breadcrumbPaths.forEach(((n,r)=>{t+=`/${n}`,"catalog"===n?e.push("/catalog"):1===r&&this.$route.params.productName?e.push(`/catalog/${this.$route.params.productName}`):e.push(t)})),e}}},f=n(1241);const v=(0,f.A)(m,[["render",p],["__scopeId","data-v-dc473584"]]);var b=v,k=n(1387),g=n(782),E={components:{RouterLink:k.Wk,RouterView:k.Tp,BreadcrumbsComponent:b},computed:{...(0,g.L8)(["isAuthenticated"])},methods:{...(0,g.i0)(["setAuthenticated"]),logout(){const e={method:"GET",headers:{"Content-Type":"application/json"}};fetch("http://localhost:3060/logout",e).then((e=>e.headers.get("Content-Type")?.includes("application/json")?e.json():e.text())).then((e=>{console.log("Logout successful",e),this.setAuthenticated(!1),this.$router.push("/")}))}},watch:{isAuthenticated(e){console.log("Состояние isAuthenticated изменилось:",e)}}};const _=(0,f.A)(E,[["render",u]]);var C=_;const w={class:"menuEditor",ref:"menuWrapper"},L=(0,i.Lk)("h1",null,"Редактор меню",-1),y={key:0,class:"sectionGap"},A=["placeholder"],R=["placeholder"],P={key:0,class:"sectionGap__parent menuEditor__wrapper_items-parent"},I=["onClick"],X=["onClick"],F=["onClick"],N=["onClick"],T={key:0,class:"menuEditor__wrapper_items-underMenu"},$=["onClick"],x=["onClick"];function O(e,t,n,a,o,s){return(0,i.uX)(),(0,i.CE)("section",w,[L,"admin"===e.currentRole?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.newName=e),placeholder:o.newPlaceholderParent},null,8,A),[[r.Jo,o.newName]]),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.newUnderName=e),placeholder:o.newPlaceholderChild},null,8,R),[[r.Jo,o.newUnderName]]),(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>s.addMenuItem())},"Добавить")])):(0,i.Q3)("",!0),(0,i.bF)(r.F,{name:"slide-fade",tag:"ul",class:"menuEditor__wrapper"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.menu,(t=>((0,i.uX)(),(0,i.CE)("li",{class:(0,c.C4)(["sectionGap menuEditor__wrapper_items",{"menuEditor__wrapper_items-active":t.isActive}]),key:t.id},["admin"===e.currentRole?((0,i.uX)(),(0,i.CE)("div",P,[(0,i.Lk)("button",{class:"change",onClick:e=>s.editMenuItem(t.id)},"Изменить",8,I),(0,i.Lk)("button",{class:"buttonChild",onClick:e=>s.addMenuItem(t.id)},"Добавить",8,X),(0,i.Lk)("button",{class:"close",onClick:e=>s.deleteMenuItem(t.id)},"X",8,F)])):(0,i.Q3)("",!0),(0,i.Lk)("h3",{onClick:e=>s.toggleActive(t.id)},(0,c.v_)(t.name),9,N),(0,i.bF)(r.eB,{name:"slide-fade"},{default:(0,i.k6)((()=>[t.isActive&&t.children.length?((0,i.uX)(),(0,i.CE)("ul",T,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.children,(n=>((0,i.uX)(),(0,i.CE)("li",{class:"sectionGap__parent_child",key:n.id},["admin"===e.currentRole?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"change",onClick:e=>s.editMenuItem(n.id,!0,t.id)},"Изменить",8,$)):(0,i.Q3)("",!0),(0,i.Lk)("h5",null,(0,c.v_)(n.name),1),"admin"===e.currentRole?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"close",onClick:e=>s.deleteMenuItem(n.id,!0,t.id)},"X",8,x)):(0,i.Q3)("",!0)])))),128))])):(0,i.Q3)("",!0)])),_:2},1024)],2)))),128))])),_:1})],512)}var U={data(){return{newName:"",newUnderName:"",newPlaceholderParent:"Название меню",newPlaceholderChild:"Название подменю",menu:[{id:1,name:"Главная",isActive:!1,children:[{id:2,name:"Команда",isActive:!1,children:[]}]},{id:3,name:"О нас",isActive:!1,children:[{id:4,name:"Команда",isActive:!1,children:[]},{id:5,name:"Контакты",isActive:!1,children:[]},{id:6,name:"Документация",isActive:!1,children:[]}]}],nextId:7,activeItemId:null}},computed:{...(0,g.L8)(["isAuthenticated"]),...(0,g.L8)(["currentRole"])},methods:{toggleActive(e){this.activeItemId=this.activeItemId===e?null:e,this.menu=this.menu.map((e=>(e.isActive=e.id===this.activeItemId,e)))},handleClickOutside(e){const t=this.$refs.menuWrapper;t&&!t.contains(e.target)&&(this.menu=this.menu.map((e=>(e.isActive=!1,e))),this.activeItemId=null)},addMenuItem(e=null){const t={id:this.nextId++,name:this.newName,children:[]},n={id:this.nextId++,name:this.newUnderName,children:[]};""!==this.newName&&null===e?(this.menu.push(t),this.newName="",this.newPlaceholderParent="Название меню"):""!==this.newUnderName&&null!==e&&(this.menu=this.menu.map((t=>(t.children&&t.id===e&&(t.children.push(n),this.newUnderName="",this.newPlaceholderChild="Название подменю"),t))))},editMenuItem(e,t=!1,n=null){""!==this.newName&&(this.menu=this.menu.map((n=>(n.id!==e||t||(n.name=this.newName),n)))),""!==this.newUnderName&&(this.menu=this.menu.map((r=>(t&&r.id===n&&(r.children=r.children.map((t=>(t.id===e&&(t.name=this.newUnderName),t)))),r))))},deleteMenuItem(e,t=!1,n=null){this.menu=t?this.menu.map((t=>(t.id===n&&(t.children=t.children.filter((t=>t.id!==e))),t))):this.menu.filter((t=>t.id!==e))}},mounted(){window.addEventListener("click",this.handleClickOutside)}};const j=(0,f.A)(U,[["render",O]]);var M=j,Q={__name:"MenuDisplayView",setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(M)]))}};const S=Q;var V=S;const D={key:0},W=["placeholder"],z=["placeholder"],J=["placeholder"],G=["placeholder"],K={type:"submit",class:"authorization_button"};function q(e,t,n,a,o,s){return(0,i.uX)(),(0,i.CE)("section",null,[(0,i.Lk)("h2",null,(0,c.v_)(o.isRegister?"Регистрация":"Авторизация"),1),o.fetchDataResponse?((0,i.uX)(),(0,i.CE)("h3",D,(0,c.v_)(o.DataResponseText),1)):(0,i.Q3)("",!0),(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,r.D$)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:(0,c.C4)(o.isError.login?"authorization_error":""),"onUpdate:modelValue":t[0]||(t[0]=e=>o.login=e),type:"text",placeholder:o.isRegister?o.placeholderLog:o.placeholderLog+" или "+o.placeholderEmail,required:""},null,10,W),[[r.Jo,o.login]]),o.isRegister?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:0,class:(0,c.C4)(o.isError.email?"authorization_error":""),"onUpdate:modelValue":t[1]||(t[1]=e=>o.email=e),type:"email",placeholder:o.placeholderEmail,required:""},null,10,z)),[[r.Jo,o.email]]):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("input",{class:(0,c.C4)(o.isError.password?"authorization_error":""),"onUpdate:modelValue":t[2]||(t[2]=e=>o.password=e),type:"password",placeholder:o.placeholderPass,required:""},null,10,J),[[r.Jo,o.password]]),o.isRegister?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,class:(0,c.C4)(o.isError.confirmPassword?"authorization_error":""),"onUpdate:modelValue":t[3]||(t[3]=e=>o.confirmPassword=e),type:"password",placeholder:o.placeholderConfPass,required:""},null,10,G)),[[r.Jo,o.confirmPassword]]):(0,i.Q3)("",!0),(0,i.Lk)("button",K,(0,c.v_)(o.isRegister?"Создать аккаунт":"Войти"),1),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>s.toggleChange()),ref:"register",class:"authorization_button"},(0,c.v_)(o.isRegister?"Войти":"Создать аккаунт"),513)],32)])}var B={data(){return{isRegister:!1,title:!0,login:"",email:"",password:"",confirmPassword:"",placeholderEmail:"Email",placeholderLog:"Логин",placeholderPass:"Пароль не менее 6 символов",placeholderConfPass:"Повторите пароль",isError:{login:!1,email:!1,password:!1,confirmPassword:!1},fetchDataResponse:!1,DataResponseText:""}},methods:{...(0,g.i0)(["setAuthenticated"]),...(0,g.i0)(["setRole"]),toggleChange(){this.isRegister=!this.isRegister},validateForm(){this.resetErrors();let e=!0;return""===this.login&&(this.placeholderLog="Логин не может быть пустым",this.isError.login=!0,e=!1),this.password.length<6&&(this.placeholderPass="Пароль должен содержать не менее 6 символов",this.isError.password=!0,e=!1),this.isRegister&&this.password!==this.confirmPassword&&(this.placeholderConfPass="Пароли не совпадают",this.isError.confirmPassword=!0,e=!1),this.isRegister&&!this.email?(this.placeholderEmail="Email не может быть пустым",this.isError.email=!0,e=!1):this.isRegister&&!/\S+@\S+\.\S+/.test(this.email)&&(this.placeholderEmail="Неверный формат email",this.isError.email=!0,e=!1),e},resetErrors(){this.isError.login=!1,this.isError.email=!1,this.isError.password=!1,this.isError.confirmPassword=!1},handleSubmit(){this.validateForm()&&this.fetchData(this.isRegister?"register":"login")},fetchData(e){const t={method:"POST",headers:{"Content-Type":"application/json"}};t.body=JSON.stringify({username:this.login,email:this.email,password:this.password}),fetch(`http://localhost:3060/${e}`,t).then((e=>e.headers.get("Content-Type")?.includes("application/json")?e.json():e.text())).then((e=>{console.log(e),this.fetchDataResponse=!0,this.DataResponseText=e,e.success&&(this.setAuthenticated(!0),this.setRole(e.role),this.$router.push("/menu"))})).catch((e=>console.error("ОШИБКА",e)))}}};const H=(0,f.A)(B,[["render",q]]);var Y=H,Z={__name:"UserAuthorizationView",setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(Y)]))}};const ee=Z;var te=ee;const ne=e=>((0,i.Qi)("data-v-7662daa6"),e=e(),(0,i.jt)(),e),re={class:"home"},ie=ne((()=>(0,i.Lk)("h1",null,"Добро пожаловать на наш сайт!",-1))),ae=ne((()=>(0,i.Lk)("p",null,"Здесь вы можете найти лучшие товары по выгодным ценам.",-1)));function oe(e,t,n,r,a,o){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",re,[(0,i.Lk)("header",null,[ie,ae,(0,i.bF)(s,{to:"/catalog",class:"button"},{default:(0,i.k6)((()=>[(0,i.eW)("Перейти в каталог")])),_:1})])])}var se={};const le=(0,f.A)(se,[["render",oe],["__scopeId","data-v-7662daa6"]]);var ue=le,ce={__name:"IndexView",setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(ue)]))}};const de=ce;var he=de;const pe=e=>((0,i.Qi)("data-v-7bfb751d"),e=e(),(0,i.jt)(),e),me={class:"catalog"},fe=pe((()=>(0,i.Lk)("h2",null,"Каталог товаров",-1))),ve={class:"products"};function be(e,t,n,r,a,o){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",me,[fe,(0,i.Lk)("div",ve,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.products,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"product"},[(0,i.Lk)("h3",null,(0,c.v_)(e.name),1),(0,i.Lk)("p",null,"Цена: "+(0,c.v_)(e.price)+"₽",1),(0,i.bF)(s,{to:o.productLink(e),class:"button"},{default:(0,i.k6)((()=>[(0,i.eW)("Посмотреть")])),_:2},1032,["to"])])))),128))])])}var ke={data(){return{separator:"/",products:[{id:1,name:"Товар 1",price:100},{id:2,name:"Товар 2",price:200},{id:3,name:"Товар 3",price:300},{id:4,name:"Товар 4",price:400}]}},computed:{currentPath(){return this.$route.path},breadcrumbPaths(){return this.currentPath.split("/").filter((e=>e))}},methods:{productLink(e){return`${this.currentPath}/${e.name}/${e.price}/id=${e.id}`}}};const ge=(0,f.A)(ke,[["render",be],["__scopeId","data-v-7bfb751d"]]);var Ee=ge,_e={__name:"CatalogView",setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(Ee)]))}};const Ce=_e;var we=Ce;const Le=e=>((0,i.Qi)("data-v-24addbed"),e=e(),(0,i.jt)(),e),ye={class:"product-page"},Ae=Le((()=>(0,i.Lk)("p",null,"Описание?",-1)));function Re(e,t,n,r,a,o){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("h1",null,(0,c.v_)(a.name),1),(0,i.Lk)("p",null,"Цена: "+(0,c.v_)(a.price)+" ₽",1),Ae,(0,i.bF)(s,{to:"/catalog",class:"button"},{default:(0,i.k6)((()=>[(0,i.eW)("Назад к каталогу")])),_:1})])}var Pe={data(){return{product:null,id:this.$route.params.productId,name:this.$route.params.productName,price:this.$route.params.productPrice}}};const Ie=(0,f.A)(Pe,[["render",Re],["__scopeId","data-v-24addbed"]]);var Xe=Ie,Fe={__name:"ProductView",setup(e){return(e,t)=>((0,i.uX)(),(0,i.CE)("main",null,[(0,i.bF)(Xe)]))}};const Ne=Fe;var Te=Ne;const $e=[{path:"/menu",component:V},{path:"/login",component:te},{path:"/home",component:he},{path:"/catalog",component:we},{path:"/catalog/:productName/:productPrice?/:productId?",component:Te}],xe=(0,k.aE)({history:(0,k.Bt)(),routes:$e});var Oe=xe,Ue=(0,g.y$)({state(){return{isAuthenticated:!1,isRole:null}},mutations:{SET_AUTHENTICATED(e,t){e.isAuthenticated=t},SET_ROLE(e,t){e.isRole=t}},actions:{setAuthenticated({commit:e},t){e("SET_AUTHENTICATED",t)},setRole({commit:e},t){e("SET_ROLE",t)}},getters:{isAuthenticated:e=>e.isAuthenticated,currentRole:e=>e.isRole}});(0,r.Ef)(C).use(Oe).use(Ue).mount("#app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,i,a){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],a=e[c][2];for(var s=!0,l=0;l<r.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var c=l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkvue_menu_editor"]=self["webpackChunkvue_menu_editor"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(5509)}));r=n.O(r)})();
//# sourceMappingURL=app.eea63da3.js.map